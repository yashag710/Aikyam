<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="login_page_style.css">
    <title>Login Page</title>
</head>
<body>
    
    <div class="container" id="container">
        <div class="form-container sign-up">
            <div class="form">
                <h1>Create Account</h1>
                <span>or use your email for registration</span>
                <input id="email" type="email" placeholder="E-Mail">
                <input id="password" type="password" placeholder="Password">
                <button id="register1">Sign Up</button>
            </div>
        </div>

        <div class="container" id="container">
        <div class="form-container sign-in">
            <div class="form">
                <h1>Sign In</h1>
                <span>use your email and password</span>
                <input id="login_email" type="email" placeholder="E-Mail">
                <input id="login_password" type="password" placeholder="Password">
                <button id="login1">Sign In</button>
              </div>
        </div>

        <div class="toggle-container">
            <div class="toggle">
            <div class="toggle-panel toggle-left">
                <h1>Welcome Back!</h1>
                <p>Enter your personal details to use all of site features</p>
                <button class="hidden" id="login">Sign In</button>
            </div>
            <div class="toggle-panel toggle-right">
                <h1>Hello!</h1>
                <p>Register with your personal details to use all of site features</p>
                <button class="hidden" id="register">Sign Up</button>
            </div>
        </div>
    </div>
</div>



<script src="login_page_script.js"></script>


<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-analytics.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyC9ju7R0aQ-dG6BlZ7RQ0toEOyuT_nJfAU",
      authDomain: "aikyam-33149.firebaseapp.com",
      projectId: "aikyam-33149",
      storageBucket: "aikyam-33149.appspot.com",
      messagingSenderId: "493838205336",
      appId: "1:493838205336:web:5e90ef53c1f96df9acabed",
      measurementId: "G-3MGSGQWTT1"
      };
  
    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const auth = getAuth();

      //----- New Registration code start	  
	  document.getElementById("register1").addEventListener("click", function() {
        var email =  document.getElementById("email").value;
        var password = document.getElementById("password").value;
        //For new registration
        createUserWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {
          // Signed in 
          const user = userCredential.user;
          console.log(user);
          alert("Registration successfully!!");
          // ...
        })
        .catch((error) => {
          const errorCode = error.code;
          const errorMessage = error.message;
          // ..
          console.log(errorMessage);
          alert(error);
        });		  		  
    });
    //----- End

    //----- Login code start	  
        document.getElementById("login1").addEventListener("click", function() {
        var email =  document.getElementById("login_email").value;
        var password = document.getElementById("login_password").value;
        console.log(email, password);
        signInWithEmailAndPassword(auth, email, password).then((userCredential) => {
          // Signed in 
          const user = userCredential.user;
          console.log(user);
          alert(user.email+" Login successfully!!!");
          window.open("geo.html","_self");
          // ...
        })
        .catch((error) => {
          const errorCode = error.code;
          const errorMessage = error.message;
          console.log(errorMessage);
          alert(errorMessage);
        });		  		  
    });
    //----- End

  </script>
</body>
</html>